<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Seller Authentication</title>
    <style>
        body {
            font-family: 'Inter', sans-serif;
            margin: 0;
            background: linear-gradient(to right, #f3e8ff, #fee2e2, #fef9c3);
            display: flex;
            flex-direction: column;
            align-items: center;
        }
        
        header {
            width: 100%;
            padding: 1rem 2rem;
            display: flex;
            justify-content: space-between;
            background: #7e22ce;
            color: white;
            align-items: center;
        }
        
        header h1 {
            font-size: 1.8rem;
        }
        
        select {
            padding: 0.3rem 0.5rem;
            border-radius: 5px;
            border: none;
            font-weight: bold;
        }
        
        main {
            width: 100%;
            max-width: 600px;
            margin-top: 3rem;
            display: flex;
            flex-direction: column;
            gap: 2rem;
        }
        
        form {
            background: white;
            padding: 2rem;
            border-radius: 1rem;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
            display: flex;
            flex-direction: column;
            gap: 1rem;
        }
        
        input,
        button {
            padding: 0.8rem;
            border-radius: 8px;
            border: 1px solid #ddd;
            font-size: 1rem;
        }
        
        button {
            cursor: pointer;
            background: #7e22ce;
            color: white;
            font-weight: bold;
            border: none;
            transition: all 0.3s;
        }
        
        button:hover {
            background: #9d4edd;
        }
        
        h2 {
            text-align: center;
            color: #4c1d95;
        }
        
        .toggle {
            text-align: center;
            cursor: pointer;
            color: #4c1d95;
            font-weight: bold;
            margin-top: 0.5rem;
        }
        
        .hidden {
            display: none;
        }
        
        label {
            font-weight: bold;
            color: #4c1d95;
        }
    </style>
</head>

<body>

    <header>
        <h1>üé® Local Artists</h1>
        <select id="langSelect">
            <option value="en">English</option>
            <option value="hi">‡§π‡§ø‡§®‡•ç‡§¶‡•Ä</option>
            <option value="kn">‡≤ï‡≤®‡≥ç‡≤®‡≤°</option>
        </select>
    </header>

    <main>
        <!-- Login Form -->
        <form id="loginForm">
            <h2 id="loginTitle">Login as Seller</h2>
            <input type="email" id="loginEmail" placeholder="Enter your email" required>
            <input type="password" id="loginPassword" placeholder="Enter your password" required>
            <button type="submit" id="loginBtn">Login</button>
            <div class="toggle" id="showRegister">New seller? Register here</div>
        </form>

        <!-- Register Form -->
        <form id="registerForm" class="hidden">
            <h2 id="registerTitle">Register as Seller</h2>
            <input type="text" id="regName" placeholder="Name" required>
            <input type="tel" id="regPhone" placeholder="Phone Number" required>
            <input type="email" id="regEmail" placeholder="Email (optional)">
            <input type="password" id="regPassword" placeholder="Password" required>
            <label for="regFile" id="regFileLabel">Upload verification file</label>
            <input type="file" id="regFile" accept=".jpg,.jpeg,.png,.pdf" required>
            <button type="submit" id="registerBtn">Register</button>
            <div class="toggle" id="showLogin">Already have an account? Login</div>
        </form>
    </main>

    <script>
        const loginForm = document.getElementById('loginForm');
        const registerForm = document.getElementById('registerForm');
        const showRegister = document.getElementById('showRegister');
        const showLogin = document.getElementById('showLogin');
        const langSelect = document.getElementById('langSelect');

        const translations = {
            en: {
                loginTitle: "Login as Seller",
                loginEmail: "Enter your email",
                loginPassword: "Enter your password",
                loginBtn: "Login",
                showRegister: "New seller? Register here",
                registerTitle: "Register as Seller",
                regName: "Name",
                regPhone: "Phone Number",
                regEmail: "Email (optional)",
                regPassword: "Password",
                regFileLabel: "Upload verification file",
                registerBtn: "Register",
                showLogin: "Already have an account? Login",
                verificationMsg: "Registration successful! Verification pending, will be completed within 24 hours. We will notify you."
            },
            hi: {
                loginTitle: "‡§µ‡§ø‡§ï‡•ç‡§∞‡•á‡§§‡§æ ‡§ï‡•á ‡§∞‡•Ç‡§™ ‡§Æ‡•á‡§Ç ‡§≤‡•â‡§ó‡§ø‡§® ‡§ï‡§∞‡•á‡§Ç",
                loginEmail: "‡§Ö‡§™‡§®‡§æ ‡§à‡§Æ‡•á‡§≤ ‡§¶‡§∞‡•ç‡§ú ‡§ï‡§∞‡•á‡§Ç",
                loginPassword: "‡§Ö‡§™‡§®‡§æ ‡§™‡§æ‡§∏‡§µ‡§∞‡•ç‡§° ‡§¶‡§∞‡•ç‡§ú ‡§ï‡§∞‡•á‡§Ç",
                loginBtn: "‡§≤‡•â‡§ó‡§ø‡§®",
                showRegister: "‡§®‡§Ø‡§æ ‡§µ‡§ø‡§ï‡•ç‡§∞‡•á‡§§‡§æ? ‡§Ø‡§π‡§æ‡§Ç ‡§™‡§Ç‡§ú‡•Ä‡§ï‡§∞‡§£ ‡§ï‡§∞‡•á‡§Ç",
                registerTitle: "‡§µ‡§ø‡§ï‡•ç‡§∞‡•á‡§§‡§æ ‡§ï‡•á ‡§∞‡•Ç‡§™ ‡§Æ‡•á‡§Ç ‡§™‡§Ç‡§ú‡•Ä‡§ï‡§∞‡§£ ‡§ï‡§∞‡•á‡§Ç",
                regName: "‡§®‡§æ‡§Æ",
                regPhone: "‡§´‡•ã‡§® ‡§®‡§Ç‡§¨‡§∞",
                regEmail: "‡§à‡§Æ‡•á‡§≤ (‡§µ‡•à‡§ï‡§≤‡•ç‡§™‡§ø‡§ï)",
                regPassword: "‡§™‡§æ‡§∏‡§µ‡§∞‡•ç‡§°",
                regFileLabel: "‡§∏‡§§‡•ç‡§Ø‡§æ‡§™‡§® ‡§´‡§º‡§æ‡§á‡§≤ ‡§Ö‡§™‡§≤‡•ã‡§° ‡§ï‡§∞‡•á‡§Ç",
                registerBtn: "‡§™‡§Ç‡§ú‡•Ä‡§ï‡§∞‡§£ ‡§ï‡§∞‡•á‡§Ç",
                showLogin: "‡§ï‡•ç‡§Ø‡§æ ‡§Ü‡§™‡§ï‡•á ‡§™‡§æ‡§∏ ‡§™‡§π‡§≤‡•á ‡§∏‡•á ‡§ñ‡§æ‡§§‡§æ ‡§π‡•à? ‡§≤‡•â‡§ó‡§ø‡§® ‡§ï‡§∞‡•á‡§Ç",
                verificationMsg: "‡§™‡§Ç‡§ú‡•Ä‡§ï‡§∞‡§£ ‡§∏‡§´‡§≤! ‡§∏‡§§‡•ç‡§Ø‡§æ‡§™‡§® ‡§≤‡§Ç‡§¨‡§ø‡§§ ‡§π‡•à, 24 ‡§ò‡§Ç‡§ü‡•ã‡§Ç ‡§Æ‡•á‡§Ç ‡§™‡•Ç‡§∞‡§æ ‡§π‡•ã‡§ó‡§æ‡•§ ‡§π‡§Æ ‡§Ü‡§™‡§ï‡•ã ‡§∏‡•Ç‡§ö‡§ø‡§§ ‡§ï‡§∞‡•á‡§Ç‡§ó‡•á‡•§"
            },
            kn: {
                loginTitle: "‡≤Æ‡≤æ‡≤∞‡≤æ‡≤ü‡≤ó‡≤æ‡≤∞‡≤∞‡≤æ‡≤ó‡≤ø ‡≤≤‡≤æ‡≤ó‡≤ø‡≤®‡≥ç ‡≤Æ‡≤æ‡≤°‡≤ø",
                loginEmail: "‡≤®‡≤ø‡≤Æ‡≥ç‡≤Æ ‡≤á‡≤Æ‡≥á‡≤≤‡≥ç ‡≤®‡≤Æ‡≥Ç‡≤¶‡≤ø‡≤∏‡≤ø",
                loginPassword: "‡≤®‡≤ø‡≤Æ‡≥ç‡≤Æ ‡≤™‡≤æ‡≤∏‡≥ç‡≤µ‡≤∞‡≥ç‡≤°‡≥ç ‡≤®‡≤Æ‡≥Ç‡≤¶‡≤ø‡≤∏‡≤ø",
                loginBtn: "‡≤≤‡≤æ‡≤ó‡≤ø‡≤®‡≥ç",
                showRegister: "‡≤π‡≥ä‡≤∏ ‡≤Æ‡≤æ‡≤∞‡≤æ‡≤ü‡≤ó‡≤æ‡≤∞? ‡≤á‡≤≤‡≥ç‡≤≤‡≤ø ‡≤®‡≥ã‡≤Ç‡≤¶‡≤£‡≤ø ‡≤Æ‡≤æ‡≤°‡≤ø",
                registerTitle: "‡≤Æ‡≤æ‡≤∞‡≤æ‡≤ü‡≤ó‡≤æ‡≤∞‡≤∞‡≤æ‡≤ó‡≤ø ‡≤®‡≥ã‡≤Ç‡≤¶‡≤£‡≤ø ‡≤Æ‡≤æ‡≤°‡≤ø",
                regName: "‡≤π‡≥Ü‡≤∏‡≤∞‡≥Å",
                regPhone: "‡≤¶‡≥Ç‡≤∞‡≤µ‡≤æ‡≤£‡≤ø ‡≤∏‡≤Ç‡≤ñ‡≥ç‡≤Ø‡≥Ü",
                regEmail: "‡≤á‡≤Æ‡≥á‡≤≤‡≥ç (‡≤ê‡≤ö‡≥ç‡≤õ‡≤ø‡≤ï)",
                regPassword: "‡≤™‡≤æ‡≤∏‡≥ç‡≤µ‡≤∞‡≥ç‡≤°‡≥ç",
                regFileLabel: "‡≤™‡≤∞‡≤ø‡≤∂‡≥Ä‡≤≤‡≤®‡≤æ ‡≤´‡≥à‡≤≤‡≥ç ‡≤Ö‡≤™‡≥ç‡≤≤‡≥ã‡≤°‡≥ç ‡≤Æ‡≤æ‡≤°‡≤ø",
                registerBtn: "‡≤®‡≥ã‡≤Ç‡≤¶‡≤£‡≤ø ‡≤Æ‡≤æ‡≤°‡≤ø",
                showLogin: "‡≤á‡≤≤‡≥ç‡≤≤‡≤ø‡≤¶‡≥ç‡≤∞‡≥Ü ‡≤ñ‡≤æ‡≤§‡≥Ü ‡≤á‡≤¶‡≥Ü‡≤Ø‡≤æ? ‡≤≤‡≤æ‡≤ó‡≤ø‡≤®‡≥ç ‡≤Æ‡≤æ‡≤°‡≤ø",
                verificationMsg: "‡≤®‡≥ã‡≤Ç‡≤¶‡≤£‡≤ø ‡≤Ø‡≤∂‡≤∏‡≥ç‡≤µ‡≤ø! ‡≤™‡≤∞‡≤ø‡≤∂‡≥Ä‡≤≤‡≤®‡≥Ü ‡≤¨‡≤æ‡≤ï‡≤ø‡≤Ø‡≤æ‡≤ó‡≤ø‡≤¶‡≥Ü, 24 ‡≤ó‡≤Ç‡≤ü‡≥Ü‡≤ó‡≤≥‡≥ä‡≤≥‡≤ó‡≥Ü ‡≤™‡≥Ç‡≤∞‡≥ç‡≤£‡≤ó‡≥ä‡≤≥‡≥ç‡≤≥‡≥Å‡≤§‡≥ç‡≤§‡≤¶‡≥Ü. ‡≤®‡≤æ‡≤µ‡≥Å ‡≤®‡≤ø‡≤Æ‡≤ó‡≥Ü ‡≤Æ‡≤æ‡≤π‡≤ø‡≤§‡≤ø ‡≤®‡≥Ä‡≤°‡≥Å‡≤§‡≥ç‡≤§‡≥á‡≤µ‡≥Ü."
            }
        };

        function updateLanguage(lang) {
            const t = translations[lang];
            document.getElementById('loginTitle').textContent = t.loginTitle;
            document.getElementById('loginEmail').placeholder = t.loginEmail;
            document.getElementById('loginPassword').placeholder = t.loginPassword;
            document.getElementById('loginBtn').textContent = t.loginBtn;
            showRegister.textContent = t.showRegister;

            document.getElementById('registerTitle').textContent = t.registerTitle;
            document.getElementById('regName').placeholder = t.regName;
            document.getElementById('regPhone').placeholder = t.regPhone;
            document.getElementById('regEmail').placeholder = t.regEmail;
            document.getElementById('regPassword').placeholder = t.regPassword;
            document.getElementById('regFileLabel').textContent = t.regFileLabel;
            document.getElementById('registerBtn').textContent = t.registerBtn;
            showLogin.textContent = t.showLogin;
        }

        langSelect.addEventListener('change', () => updateLanguage(langSelect.value));

        showRegister.addEventListener('click', () => {
            loginForm.classList.add('hidden');
            registerForm.classList.remove('hidden');
        });

        showLogin.addEventListener('click', () => {
            registerForm.classList.add('hidden');
            loginForm.classList.remove('hidden');
        });

        // --------- Backend Integration ---------

        // Login
        loginForm.addEventListener('submit', async(e) => {
            e.preventDefault();
            const email = document.getElementById('loginEmail').value;
            const password = document.getElementById('loginPassword').value;

            try {
                const res = await fetch('/auth/login', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify({
                        email,
                        password
                    })
                });
                const data = await res.json();
                if (data.token) {
                    localStorage.setItem('token', data.token);
                    window.location.href = "SellerDashboard.html";
                } else {
                    alert(data.message || "Login failed");
                }
            } catch (err) {
                alert("Error connecting to backend");
                console.error(err);
            }
        });

        // Registration
        registerForm.addEventListener('submit', async(e) => {
            e.preventDefault();
            const name = document.getElementById('regName').value;
            const phone = document.getElementById('regPhone').value;
            const email = document.getElementById('regEmail').value;
            const password = document.getElementById('regPassword').value;
            const fileInput = document.getElementById('regFile');

            const formData = new FormData();
            formData.append('name', name);
            formData.append('phone', phone);
            formData.append('email', email);
            formData.append('password', password);
            formData.append('file', fileInput.files[0]);

            try {
                const res = await fetch('/auth/register', {
                    method: 'POST',
                    body: formData
                });
                const data = await res.json();
                if (data.message) alert(data.message);
                else alert(translations[langSelect.value].verificationMsg);
                window.location.href = "SellerDashboard.html";
            } catch (err) {
                alert("Error connecting to backend");
                console.error(err);
            }
        });

        // Default language
        updateLanguage("en");
    </script>

</body>

</html>